{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/img/bi_x-octagon.svg","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// У файлі pixabay-api.js зберігай функції для виконання HTTP-запитів:\n// getImagesByQuery(query, page). Ця функція повинна приймати два параметри query\n// (пошукове слово, яке є рядком) та page (номер сторінки, яка є числом),\n// здійснювати HTTP-запит і повертати значення властивості data з отриманої відповіді.\n\nimport axios from 'axios';\nconst requestPixabay = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  params: {\n    safesearch: true,\n  },\n});\n\nconst KEY_PIXABAY = '49732510-ee91a196325b5e5f0a6aadbb3';\nexport const PER_PAGE = 15;\n\nexport async function getImagesByQuery(\n  q,\n  page = 1,\n  imageType = 'photo',\n  orientation = 'horizontal'\n) {\n  try {\n    const res = await requestPixabay('', {\n      params: {\n        q,\n        page,\n        image_type: imageType,\n        orientation,\n        key: KEY_PIXABAY,\n        per_page: PER_PAGE,\n      },\n    });\n    return res.data;\n  } catch (error) {\n    throw error;\n  }\n}\n","export default \"data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_134036_32)'%3e%3cpath%20d='M6.81%200.219C6.95056%200.0787966%207.14097%204.21785e-05%207.3395%200L16.6605%200C16.859%204.21785e-05%2017.0494%200.0787966%2017.19%200.219L23.781%206.81C23.9212%206.95056%2024%207.14097%2024%207.3395V16.6605C24%2016.859%2023.9212%2017.0494%2023.781%2017.19L17.19%2023.781C17.0494%2023.9212%2016.859%2024%2016.6605%2024H7.3395C7.14097%2024%206.95056%2023.9212%206.81%2023.781L0.219%2017.19C0.0787966%2017.0494%204.21785e-05%2016.859%200%2016.6605L0%207.3395C4.21785e-05%207.14097%200.0787966%206.95056%200.219%206.81L6.81%200.219ZM7.65%201.5L1.5%207.65V16.35L7.65%2022.5H16.35L22.5%2016.35V7.65L16.35%201.5H7.65Z'%20fill='%23FAFAFB'/%3e%3cpath%20d='M6.969%206.969C7.03867%206.89915%207.12143%206.84374%207.21255%206.80593C7.30366%206.76812%207.40135%206.74866%207.5%206.74866C7.59865%206.74866%207.69633%206.76812%207.78745%206.80593C7.87857%206.84374%207.96133%206.89915%208.031%206.969L12%2010.9395L15.969%206.969C16.0387%206.89927%2016.1215%206.84395%2016.2126%206.80621C16.3037%206.76847%2016.4014%206.74905%2016.5%206.74905C16.5986%206.74905%2016.6963%206.76847%2016.7874%206.80621C16.8785%206.84395%2016.9613%206.89927%2017.031%206.969C17.1007%207.03873%2017.156%207.12151%2017.1938%207.21262C17.2315%207.30373%2017.2509%207.40138%2017.2509%207.5C17.2509%207.59861%2017.2315%207.69626%2017.1938%207.78737C17.156%207.87848%2017.1007%207.96127%2017.031%208.031L13.0605%2012L17.031%2015.969C17.1007%2016.0387%2017.156%2016.1215%2017.1938%2016.2126C17.2315%2016.3037%2017.2509%2016.4014%2017.2509%2016.5C17.2509%2016.5986%2017.2315%2016.6963%2017.1938%2016.7874C17.156%2016.8785%2017.1007%2016.9613%2017.031%2017.031C16.9613%2017.1007%2016.8785%2017.156%2016.7874%2017.1938C16.6963%2017.2315%2016.5986%2017.2509%2016.5%2017.2509C16.4014%2017.2509%2016.3037%2017.2315%2016.2126%2017.1938C16.1215%2017.156%2016.0387%2017.1007%2015.969%2017.031L12%2013.0605L8.031%2017.031C7.96127%2017.1007%207.87848%2017.156%207.78737%2017.1938C7.69626%2017.2315%207.59861%2017.2509%207.5%2017.2509C7.40138%2017.2509%207.30373%2017.2315%207.21262%2017.1938C7.12151%2017.156%207.03873%2017.1007%206.969%2017.031C6.89927%2016.9613%206.84395%2016.8785%206.80621%2016.7874C6.76847%2016.6963%206.74905%2016.5986%206.74905%2016.5C6.74905%2016.4014%206.76847%2016.3037%206.80621%2016.2126C6.84395%2016.1215%206.89927%2016.0387%206.969%2015.969L10.9395%2012L6.969%208.031C6.89915%207.96133%206.84374%207.87857%206.80593%207.78745C6.76812%207.69633%206.74866%207.59865%206.74866%207.5C6.74866%207.40135%206.76812%207.30366%206.80593%207.21255C6.84374%207.12143%206.89915%207.03867%206.969%206.969Z'%20fill='%23FAFAFB'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_134036_32'%3e%3crect%20width='24'%20height='24'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport errorIcon from '../img/bi_x-octagon.svg';\n\nexport const form = document.querySelector('.form');\nexport const galleryEl = document.querySelector('.gallery');\nexport const loadBtn = document.querySelector('.btn-load');\n\nconst span = document.querySelector('.loader');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n// createGallery(images). Ця функція повинна приймати масив images,\n// створювати HTML-розмітку для галереї, додавати її в контейнер галереї\n// та викликати метод екземпляра SimpleLightbox refresh(). Нічого не повертає.\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n        user,\n      }) =>\n        `\n        <li><a class=\"image-wrapper\" href=\"${largeImageURL}\">\n<img class=\"image\" src=\"${webformatURL}\" alt='Tags: ${tags}' title=\"${tags}\"/>\n<ul class=\"stats-image\">\n<li class=\"stat-item\">\n<h3 class=\"stat-title\">Likes</h3>\n<p class=\"stat-text\">${likes}</p>\n</li>\n<li class=\"stat-item\">\n<h3 class=\"stat-title\">Views</h3>\n<p class=\"stat-text\">${views}</p>\n</li>\n<li class='stat-item'>\n<h3 class=\"stat-title\">Comments</h3>\n<p class=\"stat-text\">${comments}</p>\n</li>\n<li class='stat-item'>\n<h3 class=\"stat-title\">Downloads</h3>\n<p class=\"stat-text\">${downloads}</p>\n</li>\n</ul>\n</a>\n</li>\n        `\n    )\n    .join('');\n  galleryEl.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh();\n}\n\n//scrollGalleryOnLoad(page) - Ця функція приймає нічого не приймає, виконує плавне прокручування сторінки вниз\n//  на висоту двох карток галереї після завантаження нової порції зображень.\n//  Нічого не повертає.\nexport function scrollGalleryOnLoad() {\n  const firstLi = galleryEl.querySelector('li');\n  if (firstLi) {\n    const domRect = firstLi.getBoundingClientRect();\n    window.scrollBy({\n      top: domRect.height * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n\n// clearGallery(). Ця функція нічого не приймає та повинна\n// очищати вміст контейнера галереї. Нічого не повертає.\n\nexport function clearGallery() {\n  galleryEl.innerHTML = '';\n  lightbox.refresh();\n}\n\n// showLoader(). Ця функція нічого не приймає, повинна додавати\n//  клас для відображення лоадера. Нічого не повертає.\n\nexport function showLoader() {\n  span.classList.add('active');\n}\n\n// hideLoader(). Ця функція нічого не приймає, повинна прибирати\n//  клас для відображення лоадера. Нічого не повертає.\n\nexport function hideLoader() {\n  span.classList.remove('active');\n}\n\n// showLoadMoreButton(). Ця функція нічого не приймає, повинна додавати клас\n// для відображення кнопки Load more. Нічого не повертає.\nexport function showLoadMoreButton() {\n  loadBtn.classList.add('active');\n}\n\n// hideLoadMoreButton(). Ця функція нічого не приймає, повинна прибирати клас\n// для відображення кнопки Load more. Нічого не повертає.\n\nexport function hideLoadMoreButton() {\n  loadBtn.classList.remove('active');\n}\n\n// toggleLoadMoreButton(numberPage, maxPage). Ця функція приймає номер\n// поточної сторінки і загальну кількість сторінок і показує або ховає\n// кнопку Load more в залежності від того, чи є ще сторінки для завантаження.\nexport function toggleLoadMoreButton(numberPage, maxPage) {\n  if (numberPage < maxPage) {\n    showLoadMoreButton();\n  } else {\n    hideLoadMoreButton();\n  }\n}\n\n// showError(message). Ця функція приймає повідомлення помилки і відображає його для користувача\nexport function showError(message) {\n  return iziToast.show({\n    message: `${message}`,\n    backgroundColor: '#ef4040',\n    position: 'topRight',\n    maxWidth: 482,\n    messageColor: 'white',\n    theme: 'dark',\n    messageSize: '16',\n    iconUrl: errorIcon,\n  });\n}\n\n// showWarning(numberPage, maxPage). Ця функція нічого не приймає відображає повідомлення про\n// завантаження усіх сторінок\nexport function showWarning() {\n  iziToast.info({\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: 'topRight',\n    maxWidth: 482,\n    messageSize: '16',\n    messageColor: 'black',\n  });\n}\n","import {\n  getImagesByQuery,\nPER_PAGE,\n} from './js/pixabay-api.js';\n\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showError,\n  loadBtn,\n  showWarning,\n  scrollGalleryOnLoad,\n  form,\n  toggleLoadMoreButton,\n} from './js/render-functions.js';\n\nimport './css/styles.css';\n\nlet search;\nlet maxPage;\nlet numberPage;\nlet imageType;\nlet orientation;\n\nasync function getImages(search, numberPage, imageType, orientation) {\n  const response = await getImagesByQuery(\n    search,\n    numberPage,\n    imageType,\n    orientation\n  );\n  return response;\n}\n\nasync function renderImagesPage(search, numberPage, imageType, orientation) {\n  loadBtn.disabled = true;\n\n  try {\n    showLoader();\n    const response = await getImages(\n      search,\n      numberPage,\n      imageType,\n      orientation\n    );\n   \n    maxPage = Math.ceil(response.totalHits / PER_PAGE);\n    if (maxPage === 0) {\n      showError(\n        'Sorry, there are no images matching your search query. Please, try again!'\n      );\n      return;\n    }\n    \n    createGallery(response.hits);\n    if (numberPage > 1) {\n      scrollGalleryOnLoad();\n    }\n\n    if (numberPage === maxPage) {\n      showWarning();\n    }\n    \n    toggleLoadMoreButton(numberPage, maxPage);\n  } catch (error) {\n    showError(`Error: ${error.message}`);\n    return;\n  } finally {\n    hideLoader();\n    loadBtn.disabled = false;\n  }\n}\n\nform.addEventListener('submit', handleSearchSubmit);\n\nasync function handleSearchSubmit(event) {\n  event.preventDefault();\n\n  clearGallery();\n\n  numberPage = 1;\n  const elements = event.target.elements;\n  search = elements.search.value.trim().replace(/\\s+/g, '+');\n  imageType = elements.typeImg.value;\n  orientation = elements.orientation.value;\n\n  if (!search) {\n    return showError('Sorry, search query is empty!');\n  }\n\n  await renderImagesPage(search, numberPage, imageType, orientation);\n  elements.search.value = '';\n}\n\nloadBtn.addEventListener('click', handleLoadMoreClick);\n\nasync function handleLoadMoreClick(event) {\n  numberPage += 1;\n  await renderImagesPage(search, numberPage, imageType, orientation);\n}\n"],"names":["requestPixabay","axios","KEY_PIXABAY","PER_PAGE","getImagesByQuery","q","page","imageType","orientation","error","errorIcon","form","galleryEl","loadBtn","span","lightbox","SimpleLightbox","createGallery","images","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","user","scrollGalleryOnLoad","firstLi","domRect","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","toggleLoadMoreButton","numberPage","maxPage","showError","message","iziToast","showWarning","search","getImages","renderImagesPage","response","handleSearchSubmit","event","elements","handleLoadMoreClick"],"mappings":"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"}