{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/img/bi_x-octagon.svg","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// У файлі pixabay-api.js зберігай функції для виконання HTTP-запитів:\n// getImagesByQuery(query, page). Ця функція повинна приймати два параметри query\n// (пошукове слово, яке є рядком) та page (номер сторінки, яка є числом),\n// здійснювати HTTP-запит і повертати значення властивості data з отриманої відповіді.\n\nimport axios from 'axios';\nconst requestPixabay = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  params: {\n    key: '49732510-ee91a196325b5e5f0a6aadbb3',\n    safesearch: true,\n    per_page: '15',\n  },\n});\n\nexport default async function getImagesByQuery(\n  query,\n  page = 1,\n  imageType = 'photo',\n  orientation = 'horizontal'\n) {\n  try {\n    const res = await requestPixabay('', {\n      params: {\n        q: query,\n        page: page,\n        image_type: imageType,\n        orientation: orientation,\n      },\n    });\n    return res.data;\n  } catch (error) {\n    throw error;\n  }\n}\n\n","export default \"data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_134036_32)'%3e%3cpath%20d='M6.81%200.219C6.95056%200.0787966%207.14097%204.21785e-05%207.3395%200L16.6605%200C16.859%204.21785e-05%2017.0494%200.0787966%2017.19%200.219L23.781%206.81C23.9212%206.95056%2024%207.14097%2024%207.3395V16.6605C24%2016.859%2023.9212%2017.0494%2023.781%2017.19L17.19%2023.781C17.0494%2023.9212%2016.859%2024%2016.6605%2024H7.3395C7.14097%2024%206.95056%2023.9212%206.81%2023.781L0.219%2017.19C0.0787966%2017.0494%204.21785e-05%2016.859%200%2016.6605L0%207.3395C4.21785e-05%207.14097%200.0787966%206.95056%200.219%206.81L6.81%200.219ZM7.65%201.5L1.5%207.65V16.35L7.65%2022.5H16.35L22.5%2016.35V7.65L16.35%201.5H7.65Z'%20fill='%23FAFAFB'/%3e%3cpath%20d='M6.969%206.969C7.03867%206.89915%207.12143%206.84374%207.21255%206.80593C7.30366%206.76812%207.40135%206.74866%207.5%206.74866C7.59865%206.74866%207.69633%206.76812%207.78745%206.80593C7.87857%206.84374%207.96133%206.89915%208.031%206.969L12%2010.9395L15.969%206.969C16.0387%206.89927%2016.1215%206.84395%2016.2126%206.80621C16.3037%206.76847%2016.4014%206.74905%2016.5%206.74905C16.5986%206.74905%2016.6963%206.76847%2016.7874%206.80621C16.8785%206.84395%2016.9613%206.89927%2017.031%206.969C17.1007%207.03873%2017.156%207.12151%2017.1938%207.21262C17.2315%207.30373%2017.2509%207.40138%2017.2509%207.5C17.2509%207.59861%2017.2315%207.69626%2017.1938%207.78737C17.156%207.87848%2017.1007%207.96127%2017.031%208.031L13.0605%2012L17.031%2015.969C17.1007%2016.0387%2017.156%2016.1215%2017.1938%2016.2126C17.2315%2016.3037%2017.2509%2016.4014%2017.2509%2016.5C17.2509%2016.5986%2017.2315%2016.6963%2017.1938%2016.7874C17.156%2016.8785%2017.1007%2016.9613%2017.031%2017.031C16.9613%2017.1007%2016.8785%2017.156%2016.7874%2017.1938C16.6963%2017.2315%2016.5986%2017.2509%2016.5%2017.2509C16.4014%2017.2509%2016.3037%2017.2315%2016.2126%2017.1938C16.1215%2017.156%2016.0387%2017.1007%2015.969%2017.031L12%2013.0605L8.031%2017.031C7.96127%2017.1007%207.87848%2017.156%207.78737%2017.1938C7.69626%2017.2315%207.59861%2017.2509%207.5%2017.2509C7.40138%2017.2509%207.30373%2017.2315%207.21262%2017.1938C7.12151%2017.156%207.03873%2017.1007%206.969%2017.031C6.89927%2016.9613%206.84395%2016.8785%206.80621%2016.7874C6.76847%2016.6963%206.74905%2016.5986%206.74905%2016.5C6.74905%2016.4014%206.76847%2016.3037%206.80621%2016.2126C6.84395%2016.1215%206.89927%2016.0387%206.969%2015.969L10.9395%2012L6.969%208.031C6.89915%207.96133%206.84374%207.87857%206.80593%207.78745C6.76812%207.69633%206.74866%207.59865%206.74866%207.5C6.74866%207.40135%206.76812%207.30366%206.80593%207.21255C6.84374%207.12143%206.89915%207.03867%206.969%206.969Z'%20fill='%23FAFAFB'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_134036_32'%3e%3crect%20width='24'%20height='24'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport errorIcon from '../img/bi_x-octagon.svg';\n\nexport const form = document.querySelector('.form');\nexport const galleryEl = document.querySelector('.gallery');\nexport const loadBtn = document.querySelector('.btn-load');\n\nconst span = document.querySelector('.loader');\nconst loaderOverlay = document.querySelector('.loader-overlay');\n\n// У файлі render-functions.js створи екземпляр SimpleLightbox\n// для роботи з модальним вікном та зберігай функції для відображення\n// елементів інтерфейсу:\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n// createGallery(images). Ця функція повинна приймати масив images,\n// створювати HTML-розмітку для галереї, додавати її в контейнер галереї\n// та викликати метод екземпляра SimpleLightbox refresh(). Нічого не повертає.\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n        user,\n      }) =>\n        `\n        <li><a class=\"image-wrapper\" href=\"${largeImageURL}\">\n<img class=\"image\" src=\"${webformatURL}\" alt='Tags: ${tags}' title=\"${tags}\"/>\n<ul class=\"stats-image\">\n<li class=\"stat-item\">\n<h3 class=\"stat-title\">Likes</h3>\n<p class=\"stat-text\">${likes}</p>\n</li>\n<li class=\"stat-item\">\n<h3 class=\"stat-title\">Views</h3>\n<p class=\"stat-text\">${views}</p>\n</li>\n<li class='stat-item'>\n<h3 class=\"stat-title\">Comments</h3>\n<p class=\"stat-text\">${comments}</p>\n</li>\n<li class='stat-item'>\n<h3 class=\"stat-title\">Downloads</h3>\n<p class=\"stat-text\">${downloads}</p>\n</li>\n</ul>\n</a>\n</li>\n        `\n    )\n    .join('');\n  galleryEl.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh();\n}\n\n// clearGallery(). Ця функція нічого не приймає та повинна\n// очищати вміст контейнера галереї. Нічого не повертає.\n\nexport function clearGallery() {\n  galleryEl.innerHTML = '';\n  lightbox.refresh();\n}\n\n// showLoader(). Ця функція нічого не приймає, повинна додавати\n//  клас для відображення лоадера. Нічого не повертає.\n\nexport function showLoader() {\n  span.classList.add('active');\n}\n\n// hideLoader(). Ця функція нічого не приймає, повинна прибирати\n//  клас для відображення лоадера. Нічого не повертає.\n\nexport function hideLoader() {\n  span.classList.remove('active');\n}\n\n// showLoadMoreButton(). Ця функція нічого не приймає, повинна додавати клас\n// для відображення кнопки Load more. Нічого не повертає.\nexport function showLoadMoreButton() {\n  loadBtn.classList.add('active');\n}\n\n// hideLoadMoreButton(). Ця функція нічого не приймає, повинна прибирати клас\n// для відображення кнопки Load more. Нічого не повертає.\n\nexport function hideLoadMoreButton() {\n  loadBtn.classList.remove('active');\n}\n\n// toggleLoadMoreButton(numberPage, maxPage). Ця функція приймає номер\n// поточної сторінки і загальну кількість сторінок і показує або ховає\n// кнопку Load more в залежності від того, чи є ще сторінки для завантаження.\nexport function toggleLoadMoreButton(numberPage, maxPage) {\n  if (numberPage < maxPage) {\n    showLoadMoreButton();\n  } else {\n    hideLoadMoreButton();\n  }\n}\n\n// showError(message). Ця функція приймає повідомлення помилки і відображає його для користувача\nexport function showError(message) {\n  iziToast.show({\n    message: `${message}`,\n    backgroundColor: '#ef4040',\n    position: 'topRight',\n    maxWidth: 482,\n    messageColor: 'white',\n    theme: 'dark',\n    messageSize: '16',\n    iconUrl: errorIcon,\n  });\n}\n\n// showWarning(numberPage, maxPage). Ця функція приймає номер поточної сторінки і загальну кількість сторінок\n// і відображає відповідне повідомлення для користувача\nexport function showWarning(numberPage, maxPage) {\n  if (maxPage === 0) {\n    showError(\n      'Sorry, there are no images matching your search query. Please, try again!'\n    );\n    return;\n  }\n  if (numberPage >= maxPage) {\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n      maxWidth: 482,\n      messageSize: '16',\n      messageColor: 'black',\n    }); \n    return;\n  }\n  return;\n}\n\n// toggleElementsState(isDisabled). Ця функція булеве значення,\n// яке вказує, чи потрібно відключити (true) або включити (false) елементи форми.\n// export function toggleElementsState(isDisabled) {\n//   const elements = form.elements;\n//   for (let i = 0; i < elements.length; i++) {\n//     elements[i].disabled = isDisabled;\n//   }\n//   loadBtn.disabled = isDisabled;\n// }\n","import getImagesByQuery from './js/pixabay-api.js';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showError,\n  loadBtn,\n  showWarning,\n  galleryEl,\n  form,\n  toggleLoadMoreButton,\n} from './js/render-functions.js';\n\nimport './css/styles.css';\n\nconst input = document.querySelector('.search-input');\nconst btn = document.querySelector('.btn-submit');\n\nlet elements;\nlet search;\nlet maxPage = 0;\nlet numberPage = 1;\nlet imageType;\nlet orientation;\nlet domRect;\nlet searchMarker = true;\n\nasync function fetchImagesData(search, numberPage, imageType, orientation) {\n  const response = await getImagesByQuery(\n    search,\n    numberPage,\n    imageType,\n    orientation\n  );\n   return response;\n}\n\nasync function handleImageLoading(\n  searchMarker,\n  search,\n  numberPage,\n  imageType,\n  orientation\n) {\n  try {\n    showLoader();\n    const response = await fetchImagesData(\n      search,\n      numberPage,\n      imageType,\n      orientation\n    );\n    createGallery(response.hits);\n    toggleLoadMoreButton(numberPage, maxPage);\n    if (searchMarker && response.totalHits !== 0) {\n      maxPage = Math.ceil(response.totalHits / 15);\n      domRect = galleryEl.querySelector('li').getBoundingClientRect();\n      window.scrollBy({\n      top: domRect.height * 2,\n      behavior: 'smooth',\n    });\n    if (!searchMarker) {\n      window.scrollBy({\n        top: domRect.height * 2,\n        behavior: 'smooth',\n      });   \n    }\n    }\n    \n  } catch (error) {\n    showError(`Error: ${error.message}`);\n    console.log(error.message);\n  } finally {\n    hideLoader();\n    showWarning(numberPage, maxPage);\n    if (searchMarker) {\n      elements.search.value = '';\n    }\n    console.log(numberPage, maxPage);\n    toggleLoadMoreButton(numberPage, maxPage);\n  }\n}\n\nform.addEventListener('submit', fetchImages);\n\nasync function fetchImages(event) {\n  event.preventDefault();\n\n  clearGallery();\n\n  searchMarker = true;\n  numberPage = 1;\n  maxPage = 0;\n  elements = event.target.elements;\n  search = elements.search.value.trim().replace(/\\s+/g, '+');\n  imageType = elements.typeImg.value;\n  orientation = elements.orientation.value;\n\n  if (!search) {\n    elements.search.value = '';\n    return showError('Sorry, search query is empty!');\n  }\n\n  await handleImageLoading(\n    searchMarker,\n    search,\n    numberPage,\n    imageType,\n    orientation\n  );\n}\n\nloadBtn.addEventListener('click', loaderImages);\n\nasync function loaderImages(event) {\n  searchMarker = false;\n  numberPage += 1;\n  await handleImageLoading(\n    searchMarker,\n    search,\n    numberPage,\n    imageType,\n    orientation\n  );\n}\n"],"names":["requestPixabay","axios","getImagesByQuery","query","page","imageType","orientation","error","errorIcon","form","galleryEl","loadBtn","span","lightbox","SimpleLightbox","createGallery","images","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","user","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","toggleLoadMoreButton","numberPage","maxPage","showError","message","iziToast","showWarning","elements","search","domRect","searchMarker","fetchImagesData","handleImageLoading","response","fetchImages","event","loaderImages"],"mappings":"wyBAMA,MAAMA,EAAiBC,EAAM,OAAO,CAClC,QAAS,2BACT,OAAQ,CACN,IAAK,qCACL,WAAY,GACZ,SAAU,IACX,CACH,CAAC,EAEc,eAAeC,EAC5BC,EACAC,EAAO,EACPC,EAAY,QACZC,EAAc,aACd,CACA,GAAI,CASF,OARY,MAAMN,EAAe,GAAI,CACnC,OAAQ,CACN,EAAGG,EACH,KAAMC,EACN,WAAYC,EACZ,YAAaC,CACd,CACP,CAAK,GACU,IACZ,OAAQC,EAAO,CACd,MAAMA,CACP,CACH,CClCA,MAAeC,EAAA,y3FCMFC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAU,SAAS,cAAc,WAAW,EAEnDC,EAAO,SAAS,cAAc,SAAS,EACvB,SAAS,cAAc,iBAAiB,EAK9D,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAMM,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAASD,EACZ,IACC,CAAC,CACC,cAAAE,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,EACA,KAAAC,CACD,IACC;AAAA,6CACqCP,CAAa;AAAA,0BAChCC,CAAY,gBAAgBC,CAAI,YAAYA,CAAI;AAAA;AAAA;AAAA;AAAA,uBAInDC,CAAK;AAAA;AAAA;AAAA;AAAA,uBAILC,CAAK;AAAA;AAAA;AAAA;AAAA,uBAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,uBAIRC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,SAM3B,EACA,KAAK,EAAE,EACVd,EAAU,mBAAmB,YAAaO,CAAM,EAEhDJ,EAAS,QAAO,CAClB,CAKO,SAASa,GAAe,CAC7BhB,EAAU,UAAY,GACtBG,EAAS,QAAO,CAClB,CAKO,SAASc,GAAa,CAC3Bf,EAAK,UAAU,IAAI,QAAQ,CAC7B,CAKO,SAASgB,GAAa,CAC3BhB,EAAK,UAAU,OAAO,QAAQ,CAChC,CAIO,SAASiB,GAAqB,CACnClB,EAAQ,UAAU,IAAI,QAAQ,CAChC,CAKO,SAASmB,GAAqB,CACnCnB,EAAQ,UAAU,OAAO,QAAQ,CACnC,CAKO,SAASoB,EAAqBC,EAAYC,EAAS,CACpDD,EAAaC,EACfJ,IAEAC,GAEJ,CAGO,SAASI,EAAUC,EAAS,CACjCC,EAAS,KAAK,CACZ,QAAS,GAAGD,CAAO,GACnB,gBAAiB,UACjB,SAAU,WACV,SAAU,IACV,aAAc,QACd,MAAO,OACP,YAAa,KACb,QAAS3B,CACb,CAAG,CACH,CAIO,SAAS6B,EAAYL,EAAYC,EAAS,CAC/C,GAAIA,IAAY,EAAG,CACjBC,EACE,2EACN,EACI,MACD,CACD,GAAIF,GAAcC,EAAS,CACzBG,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,WACV,SAAU,IACV,YAAa,KACb,aAAc,OACpB,CAAK,EACD,MACD,CAEH,CCrIc,SAAS,cAAc,eAAe,EACxC,SAAS,cAAc,aAAa,EAEhD,IAAIE,EACAC,EACAN,EAAU,EACVD,EAAa,EACb3B,EACAC,EACAkC,EACAC,EAAe,GAEnB,eAAeC,EAAgBH,EAAQP,EAAY3B,EAAWC,EAAa,CAOxE,OANgB,MAAMJ,EACrBqC,EACAP,EACA3B,EACAC,CACJ,CAEA,CAEA,eAAeqC,EACbF,EACAF,EACAP,EACA3B,EACAC,EACA,CACA,GAAI,CACFqB,IACA,MAAMiB,EAAW,MAAMF,EACrBH,EACAP,EACA3B,EACAC,CACN,EACIS,EAAc6B,EAAS,IAAI,EAC3Bb,EAAqBC,EAAYC,CAAO,EACpCQ,GAAgBG,EAAS,YAAc,IACzCX,EAAU,KAAK,KAAKW,EAAS,UAAY,EAAE,EAC3CJ,EAAU9B,EAAU,cAAc,IAAI,EAAE,sBAAqB,EAC7D,OAAO,SAAS,CAChB,IAAK8B,EAAQ,OAAS,EACtB,SAAU,QAChB,CAAK,EACIC,GACH,OAAO,SAAS,CACd,IAAKD,EAAQ,OAAS,EACtB,SAAU,QAClB,CAAO,EAIJ,OAAQjC,EAAO,CACd2B,EAAU,UAAU3B,EAAM,OAAO,EAAE,EACnC,QAAQ,IAAIA,EAAM,OAAO,CAC7B,QAAY,CACRqB,IACAS,EAAYL,EAAYC,CAAO,EAC3BQ,IACFH,EAAS,OAAO,MAAQ,IAE1B,QAAQ,IAAIN,EAAYC,CAAO,EAC/BF,EAAqBC,EAAYC,CAAO,CACzC,CACH,CAEAxB,EAAK,iBAAiB,SAAUoC,CAAW,EAE3C,eAAeA,EAAYC,EAAO,CAahC,GAZAA,EAAM,eAAc,EAEpBpB,IAEAe,EAAe,GACfT,EAAa,EACbC,EAAU,EACVK,EAAWQ,EAAM,OAAO,SACxBP,EAASD,EAAS,OAAO,MAAM,KAAI,EAAG,QAAQ,OAAQ,GAAG,EACzDjC,EAAYiC,EAAS,QAAQ,MAC7BhC,EAAcgC,EAAS,YAAY,MAE/B,CAACC,EACH,OAAAD,EAAS,OAAO,MAAQ,GACjBJ,EAAU,+BAA+B,EAGlD,MAAMS,EACJF,EACAF,EACAP,EACA3B,EACAC,CACJ,CACA,CAEAK,EAAQ,iBAAiB,QAASoC,CAAY,EAE9C,eAAeA,EAAaD,EAAO,CACjCL,EAAe,GACfT,GAAc,EACd,MAAMW,EACJF,EACAF,EACAP,EACA3B,EACAC,CACJ,CACA"}